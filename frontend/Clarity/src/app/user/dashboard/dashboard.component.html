<div class="animated fadeIn">
  <div class="row">
    <div class="col-sm-6 col-lg-6">
      <div class="card card-inverse card-primary">
        <div class="card-block pb-0">
          <h4 class="mb-0">Average: {{meanHR}}</h4>
          <p>Heart Rate</p>
        </div>
        <div class="chart-wrapper px-1" style="height:250px;">
          <canvas baseChart class="chart" [datasets]="lineChart1Data" [labels]="lineChart1Labels" [options]="lineChart1Options" [colors]="lineChart1Colours"
            [legend]="lineChart1Legend" [chartType]="lineChart1Type"></canvas>
        </div>
      </div>
    </div>
    <div class="col-sm-6 col-lg-6">
      <div class="card card-inverse card-danger">
        <div class="card-block pb-0">
          <h4 class="mb-0">Total: {{totalSteps}}</h4>
          <p>Step Count</p>
        </div>
        <div class="chart-wrapper px-1" style="height:250px;">
          <canvas baseChart class="chart" [datasets]="barChart1Data" [labels]="barChart1Labels" [options]="barChart1Options" [colors]="barChart1Colours"
            [legend]="barChart1Legend" [chartType]="barChart1Type"></canvas>
        </div>
      </div>
    </div>
    <!--/.col-->

    <!--/.col-->
    <div class="col-sm-6 col-lg-6">
      <div class="card card-inverse card-warning">
        <div class="card-block pb-0">
          <h4 class="mb-0">Total Hours: {{sleepDuration}}</h4>
          <p>Sleep</p>
        </div>
        <div class="chart-wrapper" style="height:250px;">
          <canvas baseChart class="chart" [datasets]="lineChart3Data" [labels]="lineChart3Labels" [options]="lineChart3Options" [colors]="lineChart3Colours"
            [legend]="lineChart3Legend" [chartType]="lineChart3Type"></canvas>
        </div>
      </div>
    </div>
    <!--/.col-->
    <!--/.col-->
    <div class="col-sm-6 col-lg-6">
      <div class="card card-inverse card-info">
        <div class="card-block pb-0">
          <button type="button" class="btn btn-transparent p-0 float-right">
            <i class="icon-location-pin"></i>
          </button>
          <h4 class="mb-0">Exercise Calories: {{exerciseCalories}}</h4>
          <p>Daily Exercise</p>
        </div>
        <div class="chart-wrapper px-1" style="height:250px;">
          <canvas baseChart class="chart" [datasets]="lineChart2Data" [labels]="lineChart2Labels" [options]="lineChart2Options" [colors]="lineChart2Colours"
            [legend]="lineChart2Legend" [chartType]="lineChart2Type"></canvas>
        </div>
      </div>
    </div>
  </div>
  <!--/.row-->
  <div class="row">
    <div [ngClass]="markCandidates.length > 0 ? 'col-lg-8' : 'col-lg-12'">
      <div class="card">
        <div class="card-block">
          <div class="row">
            <div class="col-sm-5">
              <h2 class="card-title mb-0">Exercise & Sleep Index</h2>
              <h4 class="text-muted">{{ startDateString }}</h4>
            </div>
            <!--/.col-->
            <div class="col-sm-7 hidden-sm-down">
              <button type="button" class="btn btn-primary float-right"><i class="icon-cloud-download"></i></button>
              <div class="btn-toolbar float-right" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-1" data-toggle="buttons" aria-label="First group">
                  <button type="button" class="btn btn-outline-secondary" (click)="prev()"><i class="fa fa-chevron-left"></i> Previous
              </button>
                  <button type="button" class="btn btn-outline-secondary" (click)="next()">Next <i class="fa fa-chevron-right"></i>
              </button>
                </div>
                <div class="btn-group mr-1" data-toggle="buttons" aria-label="First group">
                  <button class="btn btn-outline-secondary" [class.active]="viewType.exercise" (click)="switchView()">Get Flags
              </button>
                  <button class="btn btn-danger" *ngIf="markCandidates.length > 0" (click)="markFlag()"><i class="fa fa-bookmark-o"></i> Mark Flag
              </button>
                </div>
              </div>
            </div>
            <!--/.col-->
          </div>
          <!--/.row-->
          <div class="chart-wrapper" style="height:600px;margin-top:40px;">
            <canvas baseChart class="chart" [datasets]="mainChartData" [labels]="mainChartLabels" [options]="mainChartOptions" [colors]="mainChartColours"
              [legend]="mainChartLegend" [chartType]="mainChartType" (chartClick)="chartClicked($event)"></canvas>
          </div>
        </div>
        <div class="card-footer">
          <ul>
            <li>
              <div class="text-muted">Exercise Flags</div>
              <strong>{{ totalExerciseFlags }} ({{totalExerciseFlags / totalFlags * 100 | number : '1.2-2'}}%)</strong>
              <div class="progress progress-xs mt-h">
                <div class="progress-bar bg-success" role="progressbar" [ngStyle]="{width: totalExerciseFlags / totalFlags * 100 +'%'}" aria-valuenow="40"
                  aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </li>
            <li class="hidden-sm-down">
              <div class="text-muted">Sleep Flags</div>
              <strong>{{ totalSleepFlags }} ({{totalSleepFlags / totalFlags * 100 | number : '1.2-2' }}%)</strong>
              <div class="progress progress-xs mt-h">
                <div class="progress-bar bg-danger" role="progressbar" [ngStyle]="{width: totalSleepFlags / totalFlags * 100 +'%'}" aria-valuenow="20"
                  aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </li>
            <li>
              <div class="text-muted">Exercise Level Index</div>
              <strong>{{ exerciseTotal }} ({{exerciseTotal / totalLevel * 100 | number : '1.2-2' }}%)</strong>
              <div class="progress progress-xs mt-h">
                <div class="progress-bar bg-success" role="progressbar" [ngStyle]="{width: exerciseTotal / totalLevel * 100 * 100 +'%'}"
                  aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </li>
            <li class="hidden-sm-down">
              <div class="text-muted">Sleep Deprivation Index</div>
              <strong>{{ sleepTotal }} ({{sleepTotal / totalLevel * 100 | number : '1.2-2' }}%)</strong>
              <div class="progress progress-xs mt-h">
                <div class="progress-bar bg-danger" role="progressbar" [ngStyle]="{width: sleepTotal / totalLevel * 100  +'%'}" aria-valuenow="80"
                  aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-lg-4" *ngIf="markCandidates.length > 0">
      <h2 class="card-title mb-0">Marked Flags</h2>
      <button class="btn btn-danger btn-block" (click)="markFlag()"><i class="fa fa-check"></i> Save Flag
              </button>
      <button class="btn btn-block btn-default" (click)="clearFlags()"><i class="fa fa-reset"></i> Clear Flags
              </button>
      <div *ngIf="sendRequest" class="text-center" style="padding: 40px">
        <h4><i class="fa fa-spin fa-circle-o-notch"></i> Notifying User...</h4>
      </div>
      <div class="card" *ngFor="let item of markCandidates">
        <div class="card-block p-a-1 clearfix">
          <i class="fa {{item.sleep ? 'fa-moon-o' : 'fa-bicycle'}} bg-{{item.sleep ? 'danger': 'success'}} p-a-1 font-2xl m-r-1 pull-left"></i>
          <div class="h5 text-{{item.sleep ? 'danger': 'success'}} m-b-0 m-t-h">{{item.sleep ? 'Sleep Flag' : 'Exercise Flag'}}</div>
          <div class="text-muted text-uppercase font-weight-bold font-xs">{{item.timestamp | date}}</div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <div class="card card-inverse card-success" *ngFor="let item of exerciseMarkedFlags">
        <div class="card-header">
          Physical Activity Alert: {{item.timestamp | date }}
        </div>
        <div class="card-block">
          Activity Level: {{item.level}} <br> Physical activity duration: {{(item.endTime - item.startTime) * 60/1000 | number
          : '1.2-2'}} Minutes <br> Calorie Burn: {{item.meanSpeed}}
        </div>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="card card-inverse card-danger" *ngFor="let item of sleepMarkedFlags">
        <div class="card-header">
          Sleep Activity Alert: {{item.timestamp | date}}
        </div>
        <div class="card-block">
          Sleep Level: {{item.sleep}} <br> Sleep Duration: {{(item.endTime - item.startTime) * -1 / 60/ 60/ 1000 | number
          : '1.2-2' }} Hours
        </div>
      </div>
    </div>
  </div>

  <!--/.row-->
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-block">
          <div class="row">
            <div class="col-sm-5">
              <h2 class="card-title mb-0">Real Time Analysis</h2>
            </div>
            <!--/.col-->
            <div class="col-sm-7 hidden-sm-down">
              <button type="button" class="btn btn-primary float-right" (click)="startRealtime()"><i class="fa fa-download"></i> Start</button>
            </div>
            <!--/.col-->
          </div>
          <!--/.row-->
          <div class="chart-wrapper" style="height:600px;margin-top:40px;">
            <canvas baseChart class="chart" [datasets]="realtimeChartData" [labels]="realtimeChartLabels" [options]="realtimeChartOptions"
              [colors]="realtimeChartColours" [legend]="realtimeChartLegend" [chartType]="realtimeChartType"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>